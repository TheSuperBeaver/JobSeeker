# ---- Step 1: Build Angular App ----
FROM node:22 AS build-stage

WORKDIR /app

COPY package.json package-lock.json ./
RUN npm ci 
COPY . .
RUN npm run build --configuration=production


FROM httpd:2-alpine
WORKDIR /usr/local/apache2/htdocs/
COPY --from=build /app/dist/jobseeker-frontend/ ./
COPY apache.conf /usr/local/apache2/conf/httpd.conf

EXPOSE 80
CMD ["httpd", "-D", "FOREGROUND"]